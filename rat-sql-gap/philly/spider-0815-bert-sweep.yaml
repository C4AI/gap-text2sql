description: Spider Exps 0815

target:
  vc: intvc
  cluster: rr2
  
environment:
  registry: phillyregistry.azurecr.io
  image: microsoft_pytorch:v1.1.0_gpu_cuda9.0_py36_release_gpuenv_hvd0.16.1

code:
  local_dir: $CONFIG_DIR/../

data:
  local_dir: $CONFIG_DIR/../../data
  remote_dir: spider/bawang

search:
  job_template:
    name: search_hyper_{experiment_name:s}_bert_bs{batch_size}_lr{bert_lr:.5f}_ehs{encoder_recurrent_size}_dhs{decoder_recurrent_size}_drop{decoder_dropout:f}_nls{num_layers}
    sku: G1
    command:
    - philly/spider-bert.sh {bert_lr} {encoder_recurrent_size} {decoder_recurrent_size} {decoder_dropout} {num_layers} {batch_size}
  type: random
  max_trials: 25
  params:
    - name: bert_lr
      spec: log_uniform
      low: 3e-6
      high: 2e-5
    - name: batch_size
      spec: discrete
      values: [20]
    - name: encoder_recurrent_size
      spec: discrete
      values: [512]
    - name: decoder_recurrent_size
      spec: discrete
      values: [512]
    - name: decoder_dropout
      spec: uniform
      low: 0.1
      high: 0.4
    - name: num_layers
      spec: discrete
      values: [4, 6, 8]