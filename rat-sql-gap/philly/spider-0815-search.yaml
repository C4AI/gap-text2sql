description: Spider Exps 0815

target:
  vc: intvc
  cluster: cam
  
environment:
  image: pytorch/pytorch:0.4.1-cuda9-cudnn7-devel

# environment:
#   registry: phillyregistry.azurecr.io
#   image: microsoft_pytorch:v1.1.0_gpu_cuda9.0_py36_release_gpuenv_hvd0.16.1

code:
  local_dir: $CONFIG_DIR/../

data:
  local_dir: $CONFIG_DIR/../../data
  remote_dir: spider/bawang

search:
  job_template:
    name: search_hyper_{experiment_name:s}_lr{lr:.5f}_bs{bs}_dhid{decoder_recurrent_size}_drop{decoder_dropout:f}_enuml{num_layers}_topk{top_k_learnable}
    sku: G1
    command:
    - philly/spider-0815-search.sh {bs} {lr} {top_k_learnable} {decoder_recurrent_size} {decoder_dropout} {num_layers}
  type: random
  max_trials: 100
  params:
    - name: lr
      spec: log_uniform
      low: 5e-4
      high: 2e-3
    - name: bs
      spec: discrete
      values: [20, 50, 80]
    - name:  top_k_learnable
      spec: discrete
      values: [0, 50, 100]
    - name: decoder_recurrent_size
      spec: discrete
      values: [256, 512]
    - name: num_layers
      spec: discrete
      values: [4, 6, 8]
    - name: decoder_dropout
      spec: uniform
      low: 0.1
      high: 0.3
